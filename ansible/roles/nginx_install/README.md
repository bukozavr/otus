# Role Name: NGINX install

============
Роль для установки web сервера NGINX.

При запуске роли устанавливаются компоненты NGINX, настраивается автозапуск сервиса, формируется на основе шаблона jinja2 и переменных файл конфигурации nginx.conf, который коируется на удаленный хост.
Также формируется из шаблона и копируется на сервер файл index.html, который отображает версию ОС (из фактов ansible), ip адрес сервера и клиента.

После работы плейбука для проверки работы сервиса открыть в браузере страницы
http://hostname:8080
В данном примере 8080 - номер порта, заданный в переменных в конфигурации роли. 

Requirements
------------
Протестировано на ОС Ubuntu 22.04 LTS, 24.04 LTS, Astra linux 1.7

Для успешного запуска роли требуется настроить следующее:
- подключение к целевым хостам с помощью ssh ключей
- отключить запрос пароля для повышения привилегий root.
- в Astra linux требуется подключить расширенный extended репозиторий

Role Variables
--------------
В разделе с переменными задатся номер порта для работы сервиса, имя сервера, путь к корневому разделу с документами.

В глобальном файле ansible.cfg отключена проверка ключей хостов и несоответствие версий интерпретатора python

````
[defaults]
host_key_checking = False
interpreter_python=auto_silent
nsible_remote_user = user
````

Role Handlers
------------
Используются обработчики событий, которые выполняют рестарт сервиса или перезагрузку конфигурации NGINX

Example Playbook
----------------
Пример вызова роли в плейбуке. Поскольку для выполнения задач в роли требуются повышенные привилегии, то в плейбуке требуется установить режим become

````
- hosts: all
  roles:
    - role: nginx_install
      become: true
````

License
-------

Education

Author Information
------------------
Roman Kluev
bukozavr@gmail.com
