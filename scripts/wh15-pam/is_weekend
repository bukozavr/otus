#!/bin/bash


# Имя группы для проверки
GROUP="admins"

# Получаем текущий день недели (1 - понедельник, 6 - суббота)
current_weekday=$(date +%u)

# Проверяем, является ли текущий день выходным
if [ "$current_weekday" -ge 6 ]; then

  # Получаем список групп авторизующегося пользователя
  USER_GROUPS=$(groups $PAM_USER)

  # Устанавливаем внутреннее полевое разделение (IFS) на пробелы, чтобы разбить строку на токены
  IFS=' ' read -ra tokens <<< "$USER_GROUPS"

  # Проверяем наличие "admins" в каждом токене
  found=false
  for token in "${tokens[@]}"; do
    if [[ "$token" == "$GROUP" ]]; then
      # День недели является выходным (суббота или воскресенье) и пользователь входит в группу GROUP
      exit 0
#      found=true
#      break
    fi
  done
    # День недели является выходным (суббота или воскресенье) и пользователь не входит в группу GROUP
    exit 1
else
    # День недели является рабочим днем
    exit 0
fi

